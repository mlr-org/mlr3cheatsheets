\documentclass{beamer}

\usepackage[orientation=landscape,size=a0,scale=1.4,debug]{beamerposter}
\mode<presentation>{\usetheme{mlr}}

\usepackage[sfdefault]{roboto}
\usepackage{roboto-mono}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc} % UTF-8
\usepackage[english]{babel} % Language
\usepackage{hyperref} % Hyperlinks
\usepackage{ragged2e} % Text position
\usepackage[export]{adjustbox} % Image position
\usepackage[most]{tcolorbox}
\usepackage{listings} % for R code
\lstset{language=R,
    basicstyle=\small\ttfamily,
    stringstyle=\color{DarkGreen},
    otherkeywords={0,1,2,3,4,5,6,7,8,9},
    morekeywords={TRUE,FALSE},
    deletekeywords={data,frame,length,as,character},
    keywordstyle=\color{blue},
    commentstyle=\color{DarkGreen}
}
\hypersetup{
    hyperfootnotes=false,
    colorlinks=true,
	linktocpage=true,
	pdfauthor={mlr-org team},
    %linkcolor=[RGB]{3,99,142}, % mlr blue
    urlcolor=[RGB]{231,138,69}
}


\title{mlr3 :\,: CHEAT SHEET} % Package title in header, \, adds thin space between ::
\newcommand{\packagedescription}{ % Package description in header
	The \textbf{mlr3} package provides a framework for classification, regression and other machine learning tasks.
}

\newlength{\columnheight} % Adjust depending on header height
\setlength{\columnheight}{84cm}

\newtcolorbox{codebox}{%
	sharp corners,
	leftrule=0pt,
	rightrule=0pt,
	toprule=0pt,
	bottomrule=0pt,
	fontupper=\robotomono\small,
	hbox}

\newtcolorbox{codeboxmultiline}[1][]{%
	sharp corners,
	leftrule=0pt,
	rightrule=0pt,
	toprule=0pt,
	bottomrule=0pt,
	fontupper=\robotomono\small,
	#1}

\newtcolorbox{codeboxexample}[1][]{%
	sharp corners,
	leftrule=0pt,
	rightrule=0pt,
	toprule=0pt,
	bottomrule=0pt,
	fontupper=\robotomono\small,
	width=27cm,
	adjusted title=Example,
	fonttitle = \bfseries\Large}

\newtcolorbox{codeboxinline}{%
	sharp corners,
	leftrule=0pt,
	rightrule=0pt,
	toprule=0pt,
	bottomrule=0pt,
	hbox,
	nobeforeafter,
	fontupper=\robotomono\small,
	tcbox raise base}

\newcommand{\codeinline}[1]{\begin{codeboxinline}#1\end{codeboxinline}}

\begin{document}
\begin{frame}[fragile]{}
	\begin{columns}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
						\begin{myblock}{Intro}
							The \textbf{mlr3} package builds on R6 classes and provides the essential building
							blocks of a machine learning workflow.
						\end{myblock}
						\begin{myblock}{Dictionary}
							A key-value store for \codeinline{R6::R6} objects. 
							\{mlr3\} objects are stored in five \codeinline{Dictionary}s: 
							\\
							\begin{itemize}
								\item \codeinline{mlr\_task} - Machine learning tasks.
								\item \codeinline{mlr\_learners} - Machine learning algorithms.
								\item \codeinline{mlr\_measures} - Measures.
								\item \codeinline{mlr\_resamplings} - Resampling strategies.
								\item \codeinline{mlr\_task\_generators} - Task generators.
							\end{itemize}
							\vspace{1em}		
							\begin{codebox}
								Dictionary\$\textbf{keys}(pattern = NULL)
							\end{codebox}
							Returns all keys which match \codeinline{pattern}. 
							If \codeinline{NULL}, all keys are returned. 
							\\
							\begin{codebox}
								Dictionary\$\textbf{get}(key, ...)
							\end{codebox}
							Retrieves object by \codeinline{key} and 
							passes arguments \codeinline{...} to the construction of the objects.\\
							\begin{codebox}
								Dictionary\$\textbf{mget}(keys, ...)
							\end{codebox}
							Retrieves objects by \codeinline{keys} and 
							passes named arguments \codeinline{...} to the construction of the objects. 
						\end{myblock}
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
					\begin{myblock}{Task}
						Stores observation and columns (\codeinline{backend}) and additional
						meta-data about the dataset.
						\\
						\begin{codebox}
							task = \textbf{TaskClassif}\$new(backend, target)
						\end{codebox}
						For classification, \codeinline{target} needs to be a character vector representing class labels.
						\\
						\begin{codebox}
							task = \textbf{TaskRegr}\$new(backend, target)
						\end{codebox}
						For regression, \codeinline{target} needs to be a numeric vector.
						\\
						\begin{codebox}
							task = \textbf{tsk}(.key)
						\end{codebox}
						Built-in tasks can be queried by \codeinline{.key} (from \codeinline{mlr\_task}).
						\vspace{1em}
						\\
						\begin{codebox}
							task\$\textbf{select}(cols)
						\end{codebox}
						Subsets the task based on feature names.
						\\
						\begin{codebox}
							task\$\textbf{filter}(rows)
						\end{codebox}
						Subsets the task based on row ids.
					\end{myblock}
					\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
						\begin{myblock}{Learner}
						Provides a unified interface for learning algorithms in R.
						\\
						\begin{codebox}
							learner = \textbf{lrn}(.key, ...)
						\end{codebox}
						Get learner by \codeinline{.key} (from \codeinline{mlr\_learners}) and construct the learner with specific hyperparameter and settings (...) in one go.
						\\
						\vspace{1em}
						\begin{codebox}
							learner\$\textbf{param\_set}
						\end{codebox}
						Returns a description of hyperparameter settings.	
						\\
						\begin{codebox}
							learner\$param\_set\$\textbf{values} = list(id = value)
						\end{codebox}
						Change the current hyperparameter values by assigning a named \codeinline{list(id = value)} to the \codeinline{\$values} field.
						This overwrites all previously set parameters.	
						\\
						\begin{codeboxmultiline}[width=18cm]
							learner\$param\_set\$\textbf{values} = \\
							\hspace*{1ex} \textbf{mlr3misc::insert\_named}(\\
							\hspace*{2ex} learner\$param\_set\$values,
							\\
							\hspace*{2ex} list(id = value))
						\end{codeboxmultiline}
						Update hyperparameters with named \codeinline{list(id = value)}.
						\vspace{1em}
						\\
						\begin{codebox}
							learner\$\textbf{predict\_type} = "prob"
						\end{codebox}
						Changes the predict type to posterior probabilities. 
						\codeinline{"response"} changes the predict type to class labels.
						For regression tasks, \codeinline{"se"} extracts the standard error.
						\vspace{1em}
						\\
						Additional learning algorithms are available in the mlr3learners package and the mlr3learners organization (s. Resources).
					\end{myblock}
					\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
						\begin{myblock}{Train \& Predict}
						\begin{codebox}
							learner\$\textbf{train}(task, row\_ids)
						\end{codebox}
						Train a model on the observations in \codeinline{task} given by \codeinline{row\_ids}.
						\\
						\begin{codebox}
							learner\$\textbf{model}
						\end{codebox}
						Retrieves the fitted R model.
						\\
						\vspace{1em} % Group Predict
						\begin{codebox}
							prediction = learner\$\textbf{predict}(task, row\_ids)
						\end{codebox}
						Predict on the observations in \codeinline{task} given by \codeinline{row\_ids}.
						\\
						\begin{codebox}
							measure = \textbf{msr}(.key)
						\end{codebox}
						Get measure by \codeinline{.key} from \codeinline{mlr\_measures}.
						\\
						\begin{codebox}
							prediction\$\textbf{score}(measure)
						\end{codebox}
						Access performance with \codeinline{measure}.
						\\
						\begin{codebox}
							prediction\$\textbf{data\$tab}
						\end{codebox}
						Returns predictions as \codeinline{data.table}.
					\end{myblock}
					\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
	\end{columns}
\end{frame}
\begin{withoutheader}
\begin{frame}[fragile]{}
	\begin{columns}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
							\begin{myblock}{Resampling}
							Defines how a task is partitioned into a series of train and test sets. 
							Create with \codeinline{resampling = \textbf{rsmp}(.key, ...)}
							\\
							\begin{itemize}
								\item \codeinline{bootstrap}
								(\codeinline{repeats}, \codeinline{ratio})\\
								Out-of-bag bootstrap.
								\item \codeinline{custom}\\
								Manually provided indices.
								\item \codeinline{cv}
								(\codeinline{folds})\\
								k-fold cross-validation.
								\item \codeinline{holdout}
								(\codeinline{ratio})\\
								Holdout-validation.
								\item \codeinline{repeated\_cv}
								(\codeinline{folds}, \codeinline{repeats})\\
								Repeated k-fold cross-validation.
								\item \codeinline{subsampling}
								(\codeinline{repeats}, \codeinline{ratio})\\
								Monte-Carlo CV.
							\end{itemize}
							\vspace{1em}
							\begin{codebox}
								resampling\$\textbf{param\_set}
							\end{codebox}
							Returns a description of parameter settings.
							\\
							\begin{codebox}
								resampling\$param\_set\$\textbf{values}(folds = 10)
							\end{codebox}
							Sets folds to 10.
							\\
							\begin{codebox}
								resampling\$\textbf{instantiate}(task)
							\end{codebox}
							Apply resampling strategy on \codeinline{task} (perform
							the actual splitting).
							\\
							\vspace{1em} % Group custom resampling
							\begin{codeboxmultiline}[width=26cm]
							resampling = rsmp("\textbf{custom}")\\
							resampling\$instantiate(task,\\
							v train = list(c(1:10, 51:60, 101:110)),\\
							\hspace*{1ex} test = list(c(11:20, 61:70, 111:120)))
							\end{codeboxmultiline}
							Resampling with custom splits.
						\end{myblock}
						\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
						\begin{myblock}{Resample}
							Uses the \codeinline{Resampling} to estimate the
							performance of a learning algorithm. For this, a
							model is fitted on each train set
							(\codeinline{\$train()}) and the score is evaluated
							on the corresponding test set(s)
							(\codeinline{\$predict()}) using the given
							\codeinline{Measure}.
							\\
							\\
							\textbf{Careful: Resample $!=$ Resampling}
							\vspace{1em}
							\\
							\begin{codebox}
								rr = \textbf{resample}(task, learner, resampling)
							\end{codebox}
							Performs resampling and returns a \codeinline{ResampleResult} object.
							\\
							\vspace{1em}
							\begin{codebox}
								rr\$\textbf{aggregate}(measure)
							\end{codebox}
							Returns the aggregated performance using the given \codeinline{measure}.
							\\
							\begin{codebox}
								rr\$\textbf{score}(measure)
							\end{codebox}
							Returns the performances of the individual iterations using the given \codeinline{measure}.
							\\
							\begin{codeboxexample}
								\footnotesize{
									task = tsk("pima")\\
									learner = lrn("classif.rpart", \\
									\hspace*{1ex}predict\_type = "prob")\\
									measure = msr("classif.ce")\\
									\vspace{1em}
									\\
									resampling = rsmp("cv", folds = 3L)\\
									resampling\$instantiate(task)\\
									\vspace{1em}
									\\
									rr = resample(task, learner, resampling)\\
									\vspace{1em}
									\\
									rr\$aggregate(measure)\\
									\#\# classif.ce\\
									\#\# \space\space\space\space 0.2643\\
								}
							\end{codeboxexample}
						\end{myblock}
						\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
						\begin{myblock}{Benchmark}
						Compares different learners on multiple tasks and/or different resampling schemes.
						\\
						\begin{codeboxmultiline}[width=19.4cm]
							design = \textbf{benchmark\_grid}(\\
							\hspace*{1ex}tasks, learners, resamplings)
						\end{codeboxmultiline}
						Generates a design by cross joining tasks, learners and resamplings supplied as \codeinline{list()}s.
						\\
						\begin{codebox}
							bmr = \textbf{benchmark}(design)
						\end{codebox}
						Executes the benchmark call
						using the matrix given via \codeinline{design} and
						returns a \codeinline{\robotomono{BenckmarkResult}}
						container.\\
						\begin{codeboxmultiline}[width=27cm]
							\scriptsize{
								<BenchmarkResult> of 404 rows with 8 resampling runs\\
								nr task\_id \space\space\space\space learner\_id resampling\_id iters warnings errors\\
								1 \space\space\space sonar \space classif.rpart
								\space\space\space\space\space\space holdout
								\space\space\space\space 1
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								2 \space\space\space sonar \space classif.rpart
								\space\space repeated\_cv
								\space\space 100
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								3 \space\space\space sonar classif.ranger
								\space\space\space\space\space\space holdout
								\space\space\space\space 1
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								4 \space\space\space sonar classif.ranger
								\space\space repeated\_cv
								\space\space 100
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								5 \space\space\space\space spam
								\space classif.rpart
								\space\space\space\space\space\space holdout
								\space\space\space\space 1
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								6 \space\space\space\space spam
								\space  classif.rpart
								\space\space repeated\_cv
								\space\space 100
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								7 \space\space\space\space spam
								classif.ranger
								\space\space\space\space\space\space holdout
								\space\space\space\space 1
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0\\
								8 \space\space\space\space spam
								classif.ranger
								\space\space repeated\_cv
								\space\space 100
								\space\space\space\space\space\space\space 0
								\space\space\space\space\space 0
							}
						\end{codeboxmultiline}
						\vspace{1em}
						\begin{codebox}
							bmr\$\textbf{aggregate}(measures)
						\end{codebox}
						Calculate and aggregate resampling result by \codeinline{measures}.
					\end{myblock}
					\begin{myblock}{Parallelization}
						{mlr3} uses the \codeinline{future} backends for parallelization e.g. the parallelization of \codeinline{Resampling} iterations.
						\\
						\begin{codebox}
							future::\textbf{plan}("multiprocess")
						\end{codebox}
						Selects the \codeinline{multiprocess} backend. The \codeinline{resample} function is automatically executed in parallel.
					\end{myblock}
					\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
		\begin{column}{.245\textwidth}
			\begin{beamercolorbox}[center]{postercolumn}
				\begin{minipage}{.98\textwidth}
					\parbox[t][\columnheight]{\textwidth}{
						\begin{myblock}{Logging}
							\{mlr3\} uses the \codeinline{lgr} package for logging and progress output.
							\\
							\begin{codeboxmultiline}[width=23.1cm]
								\textbf{getOption}("lgr.log\_levels")\\
								\#\# fatal error  warn  info debug trace\\ 
								\#\# 100 \space\space 200 \space\space 300 \space 400 \space 500 \space\space 600
							\end{codeboxmultiline}
							Gets threshold levels. For \{mlr3\} the default is 400. 
							\\
							\begin{codeboxmultiline}[width=25cm]
								\footnotesize{
								lgr::get\_logger("mlr3")\$\textbf{set\_threshold}("<level>")
							}
							\end{codeboxmultiline}
							Changes the logging level for \{mlr3\}.
						\end{myblock}
						\begin{myblock}{Error Handling}
							\{mlr3\} provides encapsulation to cope with errors, warnings and messages raised by machine learning algorithms.
							\\
							\begin{codeboxmultiline}[width=16cm]
								learner\$\textbf{encapsulate} = c(\\
								\hspace*{1ex} train = "evaluate", \\
								\hspace*{1ex} predict = "evaluate")
							\end{codeboxmultiline}
							Encapsulates the execution of \codeinline{\$train} and \codeinline{\$predict} with the \codeinline{evaluate} package.
							\\
							\begin{codebox}
								learner\$\textbf{errors}
							\end{codebox}
							Access the recorded log via the field \codeinline{log}, \codeinline{warnings} and \codeinline{errors}. 
							\vspace{1em}
							\\
							Fallback learners allow to score results in cases where a learners is misbehaving in some sense.
							\\
							\begin{codebox}
								learner\$\textbf{fallback} = lrn(.key)
							\end{codebox}
							Attaches fallback learner. Whenever the learner fails, \{mlr3\} falls back to the predictions of the attached fallback learner.
						\end{myblock}
						\begin{myblock}{Resources}
							\begin{itemize}
								\item \href{https://mlr3book.mlr-org.com/index.html}{mlr3book}\\ (https://mlr3book.mlr-org.com)
								\item \href{https://github.com/mlr-org}{mlr-org on GitHub}\\ (https://github.com/mlr-org)
								\item \href{https://github.com/mlr-org/mlr3learners}{mlr3learners package}\\ (https://github.com/mlr-org/mlr3learners)
								\item \href{https://github.com/mlr3learners}{mlr3learners organization}\\ (https://github.com/mlr3learners)
							\end{itemize}
						\end{myblock}
						\vfill
					}
				\end{minipage}
			\end{beamercolorbox}
		\end{column}
	\end{columns}
\end{frame}
\end{withoutheader}
\end{document}
